<% form_for :user, :url => users_path do |f| -%>
<p><label for="login">Login</label><br/>
<%= f.text_field :login %></p>

<p><label for="email">Email</label><br/>
<%= f.text_field :email %></p>

<p><label for="password">Password</label><br/>
<%= f.password_field :password %></p>

<p><label for="password_confirmation">Confirm Password</label><br/>
<%= f.password_field :password_confirmation %></p>

<% if current_user && @roles %>
  <p><label for="roles">Roles</label><br/>
  <select name="user[roles][]" multiple="multiple">
    <%= options_from_collection_for_select(@roles, "id", "name", @user.roles.collect{|r| r.id}) %>
  </select>
  </p>
<% end %>

<p><%= submit_tag 'Sign up' %></p>
<% end -%>
